
# Nacional
```{r national}
x <- "Nacional"

cat(paste("## Resumen Actual de Casos en México \n \n"))
ktbl <- tbl.pais[[x]] %>% 
          knitr::kable(format = "html",
                   digits = 0,
                   row.names = F,
                   align = "c") %>%
          kableExtra::kable_styling(
                  bootstrap_options = c("striped","condensed"),
                  full_width = F) 
  print(ktbl)

cat("\n\n")  


cat(paste("## Gráfica de Nuevos Casos Positivos por Fecha de Ingreso \n\n"))
cat("Los casos positivos son contabilizados respecto a la fecha de ingreso.
    Los días más recientes añadirán aquellos casos sospechosos que se
    conviertan en casos positivos una vez que el resultado de la prueba 
    esté disponible. \n\n")
htmltools::tagList( ggplotly(plot.posnew[[x]], tooltip = "text",
                             dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) )

cat("\n\n")

cat(paste("## Gráfica de Total Casos Positivos por Fecha de Ingreso \n\n"))
  cat("Los casos positivos son contabilizados respecto a la fecha de ingreso.
      Los días más recientes añadirán aquellos casos sospechosos que se
      conviertan en casos positivos una vez que el resultado de la prueba
      esté disponible. \n\n")
htmltools::tagList( ggplotly(plot.postotal[[x]], tooltip = "text",
                             dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) )

cat("\n\n")

cat(paste("## Gráfica de Casos Sospechosos por Fecha de Ingreso \n\n"))
htmltools::tagList( ggplotly(plot.sospnew[[x]], tooltip = "text",
                             dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) )

cat("\n\n")

cat(paste("## Gráfica de Total Casos Sospechosos por Fecha de Ingreso \n\n"))
htmltools::tagList( ggplotly(plot.sosptotal[[x]], tooltip = "text",
                             dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) )

cat("\n\n")

cat(paste("## Casos por Entidad de Residencia \n \n"))
ktbl <- tbl.entidades[[x]] %>% 
          knitr::kable(format = "html",
                   digits = 0,
                   row.names = F,
                   align = "c") %>%
          kableExtra::kable_styling(
                  bootstrap_options = c("striped","condensed"),
                  full_width = F) %>%
          kableExtra::scroll_box(height = "260px")
  print(ktbl)

cat("\n\n")  
  
```

```{r state}
grp_names_state <- grp_names[grp_names != "Nacional"]
for(x in grp_names_state){
  
  cat(paste("#", x, sep = " ", "\n\n"))

  cat(paste("## Resumen Actual de Casos \n\n", sep = " "))
  ktbl <- tbl.entidades[["Nacional"]] %>% 
              filter(`Entidad Residencia` == x) %>%
              select(-c(`Entidad Residencia`)) %>%
          knitr::kable(format = "html",
                   digits = 0,
                   row.names = F,
                   align = "c") %>%
          kableExtra::kable_styling(
                  bootstrap_options = c("striped","condensed"),
                  full_width = F)
    print(ktbl)

cat("\n\n")    
  cat("## Gráfica de Nuevos Casos Positivos por Fecha de Ingreso \n\n")
  cat("Los casos positivos son contabilizados respecto a la fecha de ingreso.
      Los días más recientes añadirán aquellos casos sospechosos que se
      conviertan en casos positivos una vez que el resultado de la prueba 
      esté disponible. \n\n")

  print(htmltools::tagList( ggplotly(plot.posnew[[x]], tooltip = "text",
                                     dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) ))
  
  cat("## Gráfica de Total Casos Positivos por Fecha de Ingreso \n\n")
    cat("Los casos positivos son contabilizados respecto a la fecha de ingreso.
      Los días más recientes añadirán aquellos casos sospechosos que se
      conviertan en casos positivos una vez que el resultado de la prueba 
      esté disponible. \n\n")
  print(htmltools::tagList( ggplotly(plot.postotal[[x]], tooltip = "text",
                                     dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) ))
  
  cat(paste("## Gráfica de Casos Sospechosos por Fecha de Ingreso \n\n"))
  print(htmltools::tagList( ggplotly(plot.sospnew[[x]], tooltip = "text",
                             dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) ))
  
  cat(paste("## Gráfica de Total Casos Sospechosos por Fecha de Ingreso \n\n"))
  print(htmltools::tagList( ggplotly(plot.sosptotal[[x]], tooltip = "text",
                             dynamicTicks = TRUE) %>%
                        layout(legend = list(orientation = "h")) ))
  
  
  cat(paste("## Casos por Municipio de Residencia \n \n"))
  ktbl <- tbl.municipios[[x]] %>% 
    knitr::kable(format = "html",
                  digits = 0,
                 row.names = F,
                 align = "c") %>%
    kableExtra::kable_styling(
          bootstrap_options = c("striped","condensed"),
          full_width = F) %>%
    kableExtra::scroll_box(height = "260px")
  print(ktbl)
  
  cat("\n\n")
}
```


